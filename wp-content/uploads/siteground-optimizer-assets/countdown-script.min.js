(function(a){a.fn.tminusCountDown=function(b){if(a(this)[0]==void 0)return;config={},a.extend(config,b),tminusTargetTime=this.setTminustminusTargetTime(config),a.data(a(this)[0],'tminusTargetTime',tminusTargetTime);var c=a.parseJSON(tminusnow);return nowTime=new Date(c.now),browserTime=new Date,timeOffset=Math.floor((nowTime.valueOf()-browserTime.valueOf())/1e3),a.data(a(this)[0],'timeOffset',timeOffset),style=config.style,a.data(a(this)[0],'style',config.style),a.data(a(this)[0],'status','play'),a.data(a(this)[0],'id',config.id),config.event_id&&(a.data(a(this)[0],'event_id',config.event_id),a.ajax({url:tCountAjax.ajaxurl,type:"post",dataType:"json",data:{action:'tminusevents',event_id:config.event_id,countdownNonce:tCountAjax.countdownNonce},success:a.proxy(function(b){a.data(a(this)[0],'eventObj',b)},this)})),config.launchtarget&&a.data(a(this)[0],'launchtarget',config.launchtarget),config.onComplete&&a.data(a(this)[0],'callback',config.onComplete),config.hangtime&&a.data(a(this)[0],'hangtime',config.hangtime),config.omitWeeks&&a.data(a(this)[0],'omitWeeks',config.omitWeeks),a('#'+a(this).attr('id')+' .'+style+'-digit').html('<div class="tc_top"></div><div class="tc_bottom"></div>'),diffSecs=Math.floor((tminusTargetTime.valueOf()-nowTime.valueOf())/1e3),a(this).doTminusCountDown(a(this).attr('id'),diffSecs,500),this},a.fn.stopTminusCountDown=function(){a.data(this[0],'status','stop')},a.fn.startTminusCountDown=function(){a.data(this[0],'status','play'),this.doTminusCountDown(a(this).attr('id'),a.data(this[0],'diffSecs'),500)},a.fn.setTminustminusTargetTime=function(a){var b=new Date;return a.targetDate?b=new Date(a.targetDate.month+'/'+a.targetDate.day+'/'+a.targetDate.year+' '+a.targetDate.hour+':'+a.targetDate.min+':'+a.targetDate.sec+(a.targetDate.utc?' UTC':'')):a.targetOffset&&(b.setFullYear(a.targetOffset.year+b.getFullYear()),b.setMonth(a.targetOffset.month+b.getMonth()),b.setDate(a.targetOffset.day+b.getDate()),b.setHours(a.targetOffset.hour+b.getHours()),b.setMinutes(a.targetOffset.min+b.getMinutes()),b.setSeconds(a.targetOffset.sec+b.getSeconds())),b},a.fn.doTminusCountDown=function(d,c,b){$this=a('#'+d),c<=0&&a.data($this[0],'launchtarget')!='countup'&&(c=0,a.data($this[0],'status','stop')),secs=Math.abs(c%60),mins=Math.floor(Math.abs(c/60)%60),hours=Math.floor(Math.abs(c/60/60)%24),a.data($this[0],'omitWeeks')=='true'?(days=Math.floor(Math.abs(c/60/60/24)),weeks=0):(days=Math.floor(Math.abs(c/60/60/24)%7),weeks=Math.floor(Math.abs(c/60/60/24/7))),style=a.data($this[0],'style'),$this.dashTminusChangeTo(d,style+'-seconds_dash',secs,b||500),$this.dashTminusChangeTo(d,style+'-minutes_dash',mins,b||1e3),$this.dashTminusChangeTo(d,style+'-hours_dash',hours,b||1e3),$this.dashTminusChangeTo(d,style+'-days_dash',days,b||1e3),$this.dashTminusChangeTo(d,style+'-days_trip_dash',days,b||1e3),$this.dashTminusChangeTo(d,style+'-weeks_dash',weeks,b||1e3),$this.dashTminusChangeTo(d,style+'-weeks_trip_dash',weeks,b||1e3),a.data($this[0],'diffSecs',c),a.data($this[0],'event_id')&&$this.checkEvent(d,c),c>0||a.data($this[0],'launchtarget')=='countup'?a.data($this[0],'status')=='play'&&(nowTime=new Date,timeOffset=a.data($this[0],'timeOffset'),nowTime.setSeconds(nowTime.getSeconds()+timeOffset),c=Math.floor((a.data($this[0],'tminusTargetTime').valueOf()-nowTime.valueOf())/1e3),t=setTimeout(function(){$this.doTminusCountDown(d,c)},1e3)):a.data($this[0],'callback')&&(a.data($this[0],'hangtime'),a.data($this[0],'callback')())},a.fn.dashTminusChangeTo=function(f,e,c,g){var b,d;$this=a('#'+f),style=a.data($this[0],'style');for(b=$this.find('.'+e+' .'+style+'-digit').length-1;b>=0;b--)d=c%10,c=(c-d)/10,$this.digitTminusChangeTo('#'+$this.attr('id')+' .'+e+' .'+style+'-digit:eq('+b+')',d,g)},a.fn.digitTminusChangeTo=function(b,c,d){d||(d=500),typeof numTransObj!="undefined"&&(c=numTransObj[c]),a(b+' div.tc_top').html()!=c+''&&(a(b+' div.tc_top').css({display:'none'}),a(b+' div.tc_top').html(c||'0').stop(!0,!0,!0).slideDown(d),a(b+' div.tc_bottom').stop(!0,!0,!0).animate({height:''},d,function(){a(b+' div.tc_bottom').html(a(b+' div.tc_top').html()),a(b+' div.tc_bottom').css({display:'block',height:''}),a(b+' div.tc_top').hide().slideUp(10)}))},a.fn.checkEvent=function(){var b,c,d;if(!a.data(this[0],'eventObj'))return;b=a.data(this[0],'eventObj').tevent;for(c in b)b[c].hasOwnProperty('tevents_event_time')&&b[c].tevents_event_time==a.data(this[0],'diffSecs')&&(b[c].hasOwnProperty('tevents_target_elem')&&b[c].tevents_event_target=='other'?target_elem=b[c].tevents_target_elem:target_elem='#'+a.data(this[0],'id')+'-'+b[c].tevents_event_target,a(target_elem).html(b[c].tevents_event_content),b[c].tevents_event_function&&(d=window[b[c].tevents_event_function],typeof d=='function'&&d()))}})(jQuery)